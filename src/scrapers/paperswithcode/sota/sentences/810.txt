The RNN encodes the state (i.e., history of the walked path) and maps it separately to a policy and Q-values.